<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<link rel="stylesheet" type="text/css" href="css/flypage/leaflet.css" />
	<link rel="stylesheet" type="text/css" href="css/mui.min.css" />
	<link rel="stylesheet" type="text/css" href="css/animate.min.css" />
	<style type="text/css">
		html,
		body {
			padding: 0px;
			margin: 0px;
		}
	</style>

	<body style="height: 100%;">
		<div id="" style="position: fixed;top: 0px; width: 100%;height: 3.5rem;padding: 0.1rem 0px;border-bottom:1px solid white ; background: black;color: white;z-index: 99999; ">
		<button style="margin-top:1.2rem ;" onclick="overClk()" type="button" class="btn btn-primary btn-lg active"><span class="glyphicon glyphicon-option-vertical" aria-hidden="true"></span>结束飞行</button>
		</div>

		<div id="" style="position: fixed;top: 2.0rem;width: 100%;height: 44rem;background: #C7C7CC;">
			<div id="topSky" style="height:34% ;background: rgb(1,76,253);border-bottom:4px solid white ;position: relative;">
				<!--预测-->
				<div id="" style="position: absolute;top: 1.5rem;right: 14rem;z-index: 99999;">
					<div id="" onclick="FTMT_div_add()" style="background: ;">
						<div id="" style="width: 6rem;border:1px solid white ; background: black;color: deepskyblue;text-align: center;">
							<span id="MT_num" style="">
							0
							</span>
							<span id="">
								MT
							</span>
						</div>
						<div id="" style="width: 6rem;border:1px solid white ; background: black;color: deepskyblue;">
							<img style="vertical-align: middle;width: 15px;transform: rotate(-90deg);" src="img/sc.png" />
							<span id="FT_num" style="padding-left:1rem ;">
							0
							</span>
						</div>
					</div>

					<!--升降速率-->
					<div id="height1" style="width: 6rem;height: 21rem;background: rgba(0,0,0,0.15);color: white; border:1px solid white;overflow:hidden;">
						<div id="rightDiv" style="position: relative;">
							<div id="sc_div" style="position: absolute;left: -5px;bottom:-2px">
								<img style="width: 20px;transform: rotate(-90deg);" src="img/sc.png" />
							</div>

							<!--<div id="" style="width:20px;height:10px;border-top:2px solid black;background: white;position: relative;">
								<span id="" style="position: absolute;right: -30px;top: -10px;">1000</span>
							</div>
							<div id="" style="width:15px;height:10px;border-top:2px solid black;background: wheat;"></div>
							<div id="" style="width:15px;height:10px;border-top:2px solid black;background: wheat;"></div>
							<div id="" style="width:15px;height:10px;border-top:2px solid black;background: wheat;"></div>
							<div id="" style="width:15px;height:10px;border-top:2px solid black;background: wheat;"></div>-->

						</div>

						<div id="" style="position: absolute;top: 4rem;right: -50px;z-index: 99999;">
							<div id="height1" style="width: 3rem;height: 18rem;background:rgba(0,0,0,0.15) ;color: white; border:1px solid white;overflow:hidden;">
								<div id="rightrightDiv">
									<!--<div id="" style="width:20px;height:20px;border-top:2px solid black;background: white;position: relative;">
										<span id="" style="position: absolute;right: -20px;top: -10px;">2</span>
									</div>
									<div id="" style="width:15px;height:20px;border-top:2px solid black;background: wheat;"></div>
									<div id="" style="width:20px;height:20px;border-top:2px solid black;background: white;position: relative;">
										<span id="" style="position: absolute;right: -20px;top: -10px;">1</span>
									</div>-->
								</div>

								<div id="" style="position: absolute;top: calc(50% - 15px);right: 1px;">

								</div>
							</div>
						</div>

						<div id="" style="position: absolute;top: calc(50% - 1rem + 1px);right: 0px;">
							<div style="position:relative;background: ;">
								<!--高度-->
								<span style="position: absolute;top:-1.25rem;left: 0.7rem;background:black ;color:#00bbff;width: 4.5rem;padding:0px 0.2rem;text-align: right;">
									<span id="num_hpa_mt">
										0
									</span>
								<span id="">
										MT
									</span>
								</span>
								<span style="position: absolute;top: 0.9rem;right: 0.5rem;background: ;padding:0px 0.2rem;font-size: 1.45rem;text-align: center;">
									<span id="num_hpa_ft">
										0
									</span>
								<span id="">
										
									</span>
								</span>

								<img style="width: 5.5rem;height: 3rem;" src="img/right.png" />
							</div>

						</div>
					</div>
					<div id="" onclick="hpa_div_add()" style="width: 6rem; background: black;border: 1px solid white; color: deepskyblue;text-align: center;">
						<span id="hpa_num" style="">
							
						</span>
						<span id="">
							HPA
						</span>
					</div>

				</div>

				<div id="" style="position: absolute;top: 4.5rem;left: 9.5rem;z-index: 99999;">

					<div id="height2" style="width: 5rem;height: 21rem;position: relative;background: rgba(0,0,0,0.15);color: white; border: 1px solid white; background: ;overflow:hidden;">
						<div id="leftDiv" style="float:right ;padding-right:0;">
							<!--<div id="" style="width:20px;height:10px;border-top:2px solid black;background: white;position: relative;">
								<span id="" style="position: absolute;right:25px ;top: -10px;">1000</span>
							</div>
							<div id="" style="width:15px;height:10px;border-top:2px solid black;background: wheat;margin-left: 5px;"></div>
							<div id="" style="width:15px;height:10px;border-top:2px solid black;background: wheat;margin-left: 5px;"></div>
							<div id="" style="width:15px;height:10px;border-top:2px solid black;background: wheat;margin-left: 5px;"></div>
							<div id="" style="width:15px;height:10px;border-top:2px solid black;background: wheat;margin-left: 5px;"></div>-->
						</div>

						<div id="" style="position: absolute;top: calc(50% - 2rem);left:calc( 0rem + 0px);">
							<div style="position:relative;background: ;">
								<span id="leftDiv_num" style="position: absolute;top: 1.25rem;left: 0.5rem;background: ;width: 3rem;font-size: 1.45rem;text-align: center;">
									
								</span>
								<img style="width: 4.5rem;height: 4rem;" src="img/left.png" />
							</div>
						</div>
					</div>
					<div id="" style="width: 5rem; background: black;border: 1px solid white; text-align: center;">
						<span id="" style="color: white;">
							TAS 0KT
						</span>
					</div>
				</div>
				<div id="" style="width: 29rem;position: absolute;top: 2rem;left:15rem;z-index: 99999999;">
					<div id="" style="width: 100%;height: 21rem;background: ;overflow: hidden;position: relative;">
						<embed src="img/cehua.svg" id="cehua" type="image/svg+xml" style="width: 30rem;position: absolute;top: -0.45rem; left: -0.5rem; " />

						<div id="zhichi_div" style="width: 22rem;height: 15rem;border-radius:50%;text-align: center;background: ; position: absolute;left: 3.35rem; bottom: 1.5rem;overflow: hidden; ">

							<embed src="img/zhichi.svg" id="zhichi" type="image/svg+xml" style="width: 11rem;margin-top: -325px; " />

						</div>

						<embed src="img/zhizhen.svg" id="zhizhen" type="image/svg+xml" style="width: 25rem; position: absolute;top: 0.7rem;left: 1.8rem; " />
					</div>
				</div>
			</div>

			<div id="bottomSky" style="height:64%;background: rgb(82,53,13);position: relative;z-index: 9999;">
				<!--可编辑1-->
				<div id="" onclick="hdg_div_add()" style="z-index:99999999;width: 5rem;height:;background: black;border:1px solid white; text-align: center;position: absolute;top: 8.5rem;left: 18rem;">
					<span style="color: white;">HDG </span><span id="hdg_num" style="color: deepskyblue;"> </span>
				</div>

				<div id="" style="width: 5rem;background: black;padding:0.3rem;font-size:1.5rem;text-align: center;position: absolute;top: 7rem;left: 27rem;">
					<span id="yibioaopan_span" style="color: white;">039</span>
				</div>

				<div id="" style="width: 5rem;height:;background: black;border:1px solid white; text-align: center;position: absolute;top: 8.5rem;right: 24rem;">
					<span style="color: white;">CRS </span><span style="color: green;"> 0</span>
				</div>

				<div id="" style="z-index:; width: 18rem;height: 18rem;background: rgba(0,0,0,0.15);border-radius:50%;position: absolute; bottom: 0.2rem;left: calc(50% - 11.5rem + 2px);">

					<div style="width: 18rem;height: 18rem;background: ;border-radius:50%;position: relative; transform: rotate(0deg);">
						<div id="yibiaopan" style="width: 18rem;height: 18rem;background: ;border-radius:50%;position: relative; transform: rotate(0deg);">
							<embed src="img/yibiaopan1.svg" type="image/svg+xml" style="width: 18rem;transform:rotate(30deg);" />
							<div id="hdg_num_rotate" style="width: 18rem;height: 18rem;background: ;border-radius:50%;position: absolute; bottom: 0.2rem;transform: rotate(0deg);">
								<img style="width: 22px;transform: rotate(-180deg);position: absolute;left: calc(50% - 12px);" src="img/sc.png" />
							</div>
						</div>

					</div>

				</div>
				<div style="z-index:; width: 23rem;height: 23rem;background: ;border-radius:50%;position: absolute; bottom:-2rem;left: calc(50% - 14rem);">
					<embed src="img/waiwei1.svg" id="jiaodu" type="image/svg+xml" style="width: 23rem;" />
				</div>

				<div style="z-index:; width: 18rem;height: 18rem;background: ;border-radius:50%;position: absolute; bottom: 0.2rem;left: calc(50% - 11.5rem);">

				</div>

				<!--左侧雷达-->
				<div id="map" style="width: 13.5rem; height: 13.5rem;background:;border: 1px solid white;position: absolute; bottom: 2rem;left: 0.5rem;">
					<div id="" style="position: relative;z-index: 9999;">
						<div id="" style="width: 3.5rem;height: 1.5rem;line-height: 1.5rem; border: 1px solid white;color: deepskyblue;position: absolute;top: 12rem;left: 10rem; background:black ;">
							15NM
						</div>
					</div>
				</div>
				<!--雷达下方1-->
				<div id="" style="width: 5rem; height: 1.5rem;background: black;color: white; border: 1px solid white;position: absolute; bottom: 0.5rem;left: 0rem;">
					<span id="">
							OTA__0
					</span>
				</div>

				<div id="" style="width: ; height: ;background: ;color: white;position: absolute; bottom: -0.2rem;left: 14rem;">
					<img style="width: 12rem;height: 5rem;" src="img/bottom_2.png" />
				</div>

				<div id="" style="width: ; height: ;background: ;color: white;position: absolute; bottom: -0.05rem;left: 33rem;">
					<img style="width: 12rem;height: 5rem;" src="img/bottom_1.png" />
				</div>

				<div id="" style="width:; height:;background: black;color: white; border: 1px solid white;position: absolute; bottom: 0.5rem;right: 0rem;">
					<div id="">
						<span>
							

						</span>
						<span id="" style="border-left: 1px solid white;padding-right: 0.5rem;">UTC TIME LCL
							<span class="ipad_time"></span>
						</span>
					</div>
				</div>
			</div>
		</div>

		<div id="hdg_div_add" class="" style="width:8rem ;border-radius:10px;text-align: center;background:rgba(0,0,0,0.5);position: fixed;top: 5rem;right: 2rem;display: none;animation-duration: 0.5s; ">

			<div id="" style="background:;margin: 0.5rem;position: relative;">
				<button id="add_HDG" onclick="add_HDG()" class="mui-icon mui-icon-mui-icon mui-icon-plusempty"></button>
				<button id="sub_HDG" onclick="sub_HDG()" class="mui-icon mui-icon-minus"></button>
				<div id="" onclick="hide()" style="position: absolute;right: -1.25rem;top:-1.25rem;color: crimson;">
					<span class="mui-icon mui-icon-close"></span>
				</div>
			</div>
		</div>
		<div id="hpa_div_add" class="" style="width:8rem ;border-radius:10px;text-align: center;background:rgba(0,0,0,0.5);position: fixed;top: 10rem;right: 2rem;display: none;animation-duration: 0.5s; ">

			<div id="" style="background:;margin: 0.5rem;position: relative;">
				<button id="add_HPA" onclick="add_HPA()" class="mui-icon mui-icon-mui-icon mui-icon-plusempty"></button>
				<button id="sub_HPA" onclick="sub_HPA()" class="mui-icon mui-icon-minus"></button>
				<div id="" onclick="hide_HPA()" style="position: absolute;right: -1.25rem;top:-1.25rem;color: crimson;">
					<span class="mui-icon mui-icon-close"></span>
				</div>
			</div>
		</div>
		<div id="ftmt_div_add" class="" style="width:8rem ;border-radius:10px;text-align: center;background:rgba(0,0,0,0.5);position: fixed;top: 15rem;right: 2rem;display: none;animation-duration: 0.5s; ">

			<div id="" style="background:;margin: 0.5rem;position: relative;">
				<button id="add_FTMT" onclick="add_FTMT()" class="mui-icon mui-icon-mui-icon mui-icon-plusempty"></button>
				<button id="sub_FTMT" onclick="sub_FTMT()" class="mui-icon mui-icon-minus"></button>
				<div id="" onclick="hide_FTMT()" style="position: absolute;right: -1.25rem;top:-1.25rem;color: crimson;">
					<span class="mui-icon mui-icon-close"></span>
				</div>
			</div>
		</div>
						<div id="jingbao" style="height:;text-align: center;background: ;font-size: 2rem;font-weight: bolder;-webkit-text-stroke:1px red;color: transparent;position: fixed;top: 31rem;right: 6rem; ">
							<div id="jinggaoDiv0">
							</div>
							<div id="jinggaoDiv1">
							</div>
							<div id="jinggaoDiv2">
							</div>
						</div>
		<div id="" style="position: fixed;bottom: 0px;width: 100%;height: 2rem;line-height:1.5rem;color: white; background: black;">
			<!--<div id="" style="width: 5rem; height: 1.5rem;float:left;border-right:1px solid #CCCCCC ;">

			</div>
			<div id="" style="width: 5rem; height: 1.5rem;float:left;text-align: center; border-right:1px solid #CCCCCC ;">
				INSET
			</div>
			<div id="" style="width: 5rem; height: 1.5rem;float:left;text-align: center;border-right:1px solid #CCCCCC ;">

			</div>
			<div id="" style="width: 5rem; height: 1.5rem;float:left;text-align: center; border-right:1px solid #CCCCCC ;">
				PTD
			</div>
			<div id="" style="width: 5rem; height: 1.5rem;float:left;text-align: center;border-right:1px solid #CCCCCC ;">

			</div>
			<div id="" style="width: 5rem; height: 1.5rem;float:left;text-align: center; border-right:1px solid #CCCCCC ;">
				CDI
			</div>
			<div id="" style="width: 5rem; height: 1.5rem;float:left;text-align: center;border-right:1px solid #CCCCCC ;">
				DME
			</div>
			<div id="" style="width: 5rem; height: 1.5rem;float:left;text-align: center;text-align: center; border-right:1px solid #CCCCCC ;">
				XPDR
			</div>
			<div id="" style="width: 5rem; height: 1.5rem;float:left;text-align: center;border-right:1px solid #CCCCCC ;">
				IDENT
			</div>
			<div id="" style="width: 5rem; height: 1.5rem;float:left;text-align: center; border-right:1px solid #CCCCCC ;">
				TMR/REF
			</div>
			<div id="" style="width: 5rem; height: 1.5rem;float:left;text-align: center;border-right:1px solid #CCCCCC ;">
				NRST
			</div>
			<div id="" style="width: 5rem; height: 1.5rem;float:left;text-align: center; border-right:1px solid #CCCCCC ;">
				ALERTS
			</div>-->
		</div>
	</body>
	<script src="js/mui.min.js"></script>
	<script src="js/mui.min.js"></script>
	<script src="js/leaflet.js"></script>
	<script src="js/jquery.min.js"></script>
	<script src="js/planeIcon.js"></script>
	<script type="text/javascript">
				//	横屏显示
//		mui.plusReady(function() {
//			plus.screen.lockOrientation("landscape-primary");
//		});
		//返回主界面
		$('#backMain').click(function() {
			//		mui.back()
		})
		var htmlRight = '';
		var htmlleft = '';
		var htmlrightright = '';

		for(var i = 12; i > 0; i--) {
			htmlRight += '<div id="" style="width:20px;height:10px;border-top:2px solid #BBBBBB;background: ;position: relative;">' +
				'<span id="" style="position: absolute;right: -34px;top: -11px;color:#BBBBBB"><b>' + i + "00" + '</b></span>' +
				'</div>' +
				'<div id="" style="width:15px;height:10px;border-top:2px solid #BBBBBB;background: ;"></div>' +
				'<div id="" style="width:15px;height:10px;border-top:2px solid #BBBBBB;background: ;"></div>' +
				'<div id="" style="width:15px;height:10px;border-top:2px solid #BBBBBB;background: ;"></div>' +
				'<div id="" style="width:15px;height:10px;border-top:2px solid #BBBBBB;background: ;"></div>';

			if(i < 5) {
				htmlleft += '<div id="" style="width:20px;height:25px;border-top:2px solid #BBBBBB;background: ;position: relative;">' +
					'<span id="" style="position: absolute;right:22px ;top: -11px;color:#BBBBBB"><b>' + i + "0" + '</b></span>' +
					'<div id="" style="width:15px;height:25px;background: red;margin-left: 5px;"></div>' +
					'</div>' +
					'<div id="" style="width:15px;height:25px;border-top:2px solid #BBBBBB;background: red;margin-left: 5px;"></div>';
			} else {
				htmlleft += '<div id="" style="width:20px;height:25px;border-top:2px solid #BBBBBB;background: ;position: relative;">' +
					'<span id="" style="position: absolute;right:22px ;top: -11px;color:#BBBBBB"><b>' + i + "0" + '</b></span>' +
					'<div id="" style="width:15px;height:25px;background:white;margin-left: 5px;"></div>' +
					'</div>' +
					'<div id="" style="width:15px;height:25px;border-top:2px solid #BBBBBB;background:white ;margin-left: 5px;"></div>';
			}

		}
		var arrhtmlleftleft = [4, 3, 2, 1, 0, -1, -2, -3, -4];
		for(var key in arrhtmlleftleft) {
			htmlrightright += '<div id="" style="width:20px;height:25px;border-top:2px solid #BBBBBB;background: ;position: relative;">' +
				'<span id="" style="position: absolute;right: -18px;top: -13px;color:#BBBBBB">' + arrhtmlleftleft[key] + '</span>' +
				'</div>' +
				'<div id="" style="width:15px;height:25px;border-top:2px solid #BBBBBB;background: ;"></div>';
		}
		htmlRight += '<div id="" style="width:20px;height:10px;border-top:2px solid #BBBBBB;background: ;position: relative;">' +
			'<span id="" style="position: absolute;right: -25px;top: -10px;color:#BBBBBB"><b>' + "0" +
			'</b></span>' +
			'</div>';
		htmlleft += '<div id="" style="width:20px;height:25px;border-top:2px solid #BBBBBB;background: ;position: relative;">' +
			'<span id="" style="position: absolute;right: 22px;top: -10px;color:#BBBBBB"><b>' + "0" +
			'</b></span>' +
			'</div>';
		$('#rightDiv').append(htmlRight)
		$('#leftDiv').append(htmlleft)
		$('#rightrightDiv').append(htmlrightright)
		$('#rightDiv').css({
			"transform": "translateY(-435px)"
		})
		$('#leftDiv').css({
			"transform": "translateY(-435px)"
		})
		//		获取系统时间1
		getNowFormatDate()

		function getNowFormatDate() {
			var date = new Date();
			var seperator1 = "-";
			var seperator2 = ":";
			var month = date.getMonth() + 1;
			var strDate = date.getDate();
			if(month >= 1 && month <= 9) {
				month = "0" + month;
			}
			if(strDate >= 0 && strDate <= 9) {
				strDate = "0" + strDate;
			}
			var currentdate = date.getHours() + seperator2 + date.getMinutes() +
				seperator2 + date.getSeconds();

			$(".ipad_time").html(currentdate)
		}
	</script>
	<script type="text/javascript">
	var ipAddress = localStorage.getItem('ipAddress');
	ipAddress = JSON.parse(ipAddress)
	var UserPhone = localStorage.getItem('UserPhone');
	// 获取地图ipad路径
	var map_relativePath = "_downloads/";
	var sd_path = plus.io.convertLocalFileSystemURL(map_relativePath);

	//地图
	var map = L.map('map', {
		editable: true,
		center: [39.9, 116.4],
		zoom: 14,
	});

	var plane = L.icon({
		iconUrl: 'img/plane.png',
		//					  shadowUrl: 'img/plane-shadow.png',
	});

//	L.marker([39.9, 116.4], {
//		icon: plane
//	}).addTo(map);
	
//	plus.geolocation.getCurrentPosition(function(p) {
//		alert('Geolocation\nLatitude:' + p.coords.latitude + '\nLongitude:' + p.coords.longitude + '\nAltitude:' + p.coords.altitude);
//		yin = L.icon({
//			iconUrl: 'img/plane.png',
//			iconSize: [30, 30], // size of the icon
//		});
//		L.marker([p.coords.latitude, p.coords.longitude], {
//			icon: yin
//		}).addTo(map);
//
//	}, function(e) {
//		alert('Geolocation error: ' + e.message);
//	});
		L.tileLayer(sd_path + '/hybrid/{z}/{x}/{y}.jpg', {
//	L.tileLayer('http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png', { //pc测试
		maxZoom: 18,
	}).addTo(map);

	var positionA1 = null; //禁飞区点标记

	//	setInterval(function() {
	//		positionClk(x++, 116.4)
	//		$('#height1').html(x++);
	//		$('#height1').html(x++);
	//	}, 1000)

	function positionClk(lat, lng) {
		//		console.log([lat, lng])
		if(positionA1 == null) {
			positionA1 = L.marker([lat, lng], {
				icon: plane,
				zIndexOffset: 999,
			}).addTo(map)
			map.panTo(positionA1.getLatLng())
		} else {
			positionA1.remove(); //						positionA1 = null;
			positionA1 = L.marker([lat, lng], {
				icon: plane,
				zIndexOffset: 999,
			}).addTo(map)
			map.panTo(positionA1.getLatLng())
		}

	}
	
	var record_id = '';
	mui.plusReady(function() {
		var self = plus.webview.currentWebview();
		record_id = self.record_id; //获得参数
	})
	var index = 0;

	function xxxClk() {
		console.log(record_id);
		console.log(index);
	}
		setInterval(function() {
		$.ajax({
			type: "get",
			url: "http://" + ipAddress + "/api/Values/GetFlyData",
			contentType: 'application/json',
			data: {
				record_id: record_id,
				index: index += 3,
				num: 3,
			},
			success: function(data) {
												console.log(JSON.stringify(data))
				//				var data = data.data

				for(var i in data) {
//					(function() {
						var x = i;

						
						
						$("#yibioaopan_span").html(data[x].yaw.toFixed(0))
						$("#yibiaopan").css("-webkit-transform", "rotate(" + -data[x].yaw + "deg)")
						$("#leftDiv_num").html(data[x].alt.toFixed(0))
						$("#leftDiv").css("-webkit-transform", "translateY(" + (data[x].alt * 5 - 435) + "px)")

						//						$("#rightDiv").css("-webkit-transform", "translateY(" + -data[i].right + "px)")

						$("#zhizhen").css("-webkit-transform", "rotate(" + -data[x].roll + "deg)")
						$("#zhichi_div").css("-webkit-transform", "rotate(" + -data[x].roll + "deg)")
						$("#zhichi").css("-webkit-transform", "translateY(" + (data[x].pitch + 2) * 10 + "px)")
						
						positionClk(data[x].lat, data[x].lng)
						//						}, 20 * x);

						switch(true) {
							case data[x].yaw > 0 && data[x].yaw < 45:
								plane = plane45;
								console.log(plane)
								break;
							case data[x].yaw > 45 && data[x].yaw < 90:
								plane = plane90;
								console.log(plane)
								break;
							case data[x].yaw > 90 && data[x].yaw < 135:
								plane = plane135;
								console.log(plane)
								break;
							case data[x].yaw > 135 && data[x].yaw < 180:
								plane = plane180;
								console.log(plane)
								break;
							case data[x].yaw > 180 && data[x].yaw < 225:
								plane = plane225;
								console.log(plane)
								break;
							case data[x].yaw > 225 && data[x].yaw < 270:
								plane = plane270;
								console.log(plane)
								break;
							case data[x].yaw > 270 && data[x].yaw < 315:
								plane = plane315;
								console.log(plane)
								break;
							case data[x].yaw > 315:
								plane = plane;
								console.log(plane)
								break;
						}
						if(data[x].gpsstate == 0) {
							var pianhang = 'GPS未定位';
							warn(pianhang)
						} else if(data[x].gpsstate == 1) {
							$("#gps").html('实时GPS')
						} else if(data[x].gpsstate == 2) {
							$("#gps").html('差分GPS')
						}

						if(data[x].roll > 10) {
							var pianhang = '偏离轨迹';
							warn(pianhang)
						}
						//						else {
						//							var pianhang = 'clear';
						//							//							console.log(pianhang)
						//							warn(pianhang)
						//
						//						}1
						if(data[x].roll < -10) {
							var pianhang = '高危姿态';
							warn(pianhang)
						}
//					})();
				}

			}
		})
		}, 100);

	function audioFn1() {
		var aud = document.getElementById("aud");
		var img = document.getElementById("playpause");
		var im = document.getElementsByClassName("img");
		var audio1 = document.getElementsByTagName("audio");
		aud.play();
	}
	var num1 = 0,
		num2 = 0,
		num3 = 0;

	function warn(pianhang) {
		var relativePath1 = '';

		switch(pianhang) {
			case '偏离轨迹':
				$('#jinggaoDiv0').html(html);
				$('#jinggaoDiv1').html('');
				$('#jinggaoDiv2').html('');
				num1++;
				relativePath1 = localStorage.getItem('stopWarnRecord2');
				break;
			case '高危姿态':
				$('#jinggaoDiv2').html(html);
				$('#jinggaoDiv1').html('');
				$('#jinggaoDiv0').html('');
				num2++;
				relativePath1 = localStorage.getItem('stopWarnRecord3');
				break;
			case 'GPS未定位':
				$('#jinggaoDiv1').html(html);
				$('#jinggaoDiv0').html('');
				$('#jinggaoDiv2').html('');
				num3++;
				relativePath1 = localStorage.getItem('stopWarnRecord4');
				break;
		}

		var sd_path = plus.io.convertLocalFileSystemURL(relativePath1);
		var html = '<li class="mui-table-view-cell mui-collapse animated flash">' +
			'<a class="mui-navigate-right" href="#">' + pianhang + '</a>' +
			'<div class="mui-collapse-content">' +
			'<div id="" style="height: 100%;display: inline-block;margin-top: 0.3rem ;margin-left: 3rem;">' +
			'<audio src="' + sd_path + '" id="aud"></audio>' +
			'<img src="img/audiox.png" class="img" id="playpause" onclick="audioFn1()"  />' +
			'</div>' +
			'</div>' +
			'</li>';
		if(pianhang == '偏离轨迹') {
			if(num1 == 200) {
				$('#jinggaoDiv1').html(html);
				audioFn1()
				num1 = 0;
			}
		}
		if(pianhang == '高危姿态') {
			if(num2 == 200) {
				$('#jinggaoDiv2').html(html);
				audioFn1()
				num2 = 0;
			}
		}
		if(pianhang == 'GPS未定位') {
			if(num3 == 200) {
				$('#jinggaoDiv0').html(html);
				audioFn1()
				console.log(num3)
				num3 = 0;
			}
		}

		if(pianhang == 'clear') {
			$('#jinggaoDiv1').html('');
			$('#jinggaoDiv1').html('');
		}
	}

	if(line != null) {
		map.removeLayer(line);
	}

	var lineHtml = JSON.parse(localStorage.getItem('planeline'));

	var line = L.polyline(lineHtml.points).addTo(map);
	map.fitBounds(lineHtml.points); //点击定位line到屏幕中心
	//	moniFly()

	//飞行模拟
	function moniFly() {
		var marker = L.Marker.movingMarker(line._latlngs, [3000, 1000, 9000, 4000, 9000, 9000, 9000, 9000], {
			autostart: true
		}).addTo(map);
		marker.on('end', function() {
			marker.remove();
		});
	}

	function overClk() {
		mui.back()
	}
	</script>

</html>